!function(t){var i={};function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=21)}([function(t,i){class e{constructor(){0==arguments.length?(this.x=0,this.y=0,this.z=0):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2]):1==arguments.length&&(arguments[0]instanceof e&&(this.x=arguments[0].x),this.y=arguments[0].y,this.z=arguments[0].z)}strval(){var t="(";return t+=this.x+", ",t+=this.y+", ",t+=this.z,t+=")"}static add(){for(var t=arguments.length,i=0,s=0,r=0,n=0;n<t;n++)i+=arguments[n].x,s+=arguments[n].y,r+=arguments[n].z;return new e(i,s,r)}static sub(){var t=arguments[0].x-arguments[1].x,i=arguments[0].y-arguments[1].y,s=arguments[0].z-arguments[1].z;return new e(t,i,s)}static mul(){var t,i,s,r=arguments[0],n=arguments[1];return r instanceof e?(t=r.x*n,i=r.y*n,s=r.z*n):n instanceof e&&(t=r*n.x,i=r*n.y,s=r*n.z),new e(t,i,s)}static div(){var t=arguments[0],i=arguments[1],s=t.x/i,r=t.y/i,n=t.z/i;return new e(s,r,n)}static dot(){var t=arguments[0],i=arguments[1];return t.x*i.x+t.y*i.y+t.z*i.z}static cross(){var t=arguments[0],i=arguments[1],s=t.y*i.z-t.z*i.y,r=t.z*i.x-t.x*i.z,n=t.x*i.y-t.y*i.x;return new e(s,r,n)}len(){return Math.sqrt(e.dot(this,this))}unit(){var t=this.len(),i=new e;return t>0&&(i=e.div(this,t)),i}neg(){var t=-this.x,i=-this.y,s=-this.z;return new e(t,i,s)}}"compile"==butiran&&(t.exports=function(){return e})},function(t,i,e){function s(){13==arguments.length?(this.i=arguments[0],this.m=arguments[1],this.D=arguments[2],this.q=arguments[3],this.c=arguments[4],this.r=arguments[5],this.v=arguments[6],this.A=arguments[7],this.k=arguments[8],this.M=arguments[9],this.I=arguments[10],this.the=arguments[11],this.w=arguments[12]):1==arguments.length?(this.i=arguments[0].i,this.m=arguments[0].m,this.D=arguments[0].D,this.q=arguments[0].q,this.c=arguments[0].c,this.r=arguments[0].r,this.v=arguments[0].v,this.A=arguments[0].A,this.k=arguments[0].k,this.M=arguments[0].M,this.I=arguments[0].I,this.the=arguments[0].the,this.w=arguments[0].w):(this.i=0,this.m=1,this.D=1,this.q=1,this.c="#000",this.r=new Vect3,this.v=new Vect3,this.A=0,this.k=new Array,this.M=0,this.I=10,this.the=0,this.w=0),this.strval=function(){var t="(";return t+=this.i+", ",t+=this.m+", ",t+=this.D+", ",t+=this.q+", ",t+=this.c+", ",t+=this.r.strval()+", ",t+=this.v.strval()+", ",t+=this.A+", ",t+=this.k+", ",t+=this.M+", ",t+=this.I+", ",t+=this.the+", ",t+=this.w+")"}}"compile"==butiran&&(Vect3=e(0)()),"compile"==butiran&&(t.exports=function(){return s})},function(t,i){"compile"==butiran&&(t.exports={apply:function(){var t=arguments[0];return{to:function(){var i=arguments[0];for(var e in t)i.style[e]=t[e]}}},append:function(){var t=arguments[0];return{to:function(){arguments[0].append(t)}}},create:function(){var t=arguments[0];return{withId:function(){var i=arguments[0],e=document.createElement(t);return e.id=i,e}}},elementWithId:function(){var t=arguments[0];return document.getElementById(t)},clear:function(){var t=arguments[0];"TEXTAREA"===t.tagName&&(t.value=""),t.tagName},addText:function(){var t=arguments[0];return{to:function(){var i=arguments[0];i.value+=t,i.scrollTop=i.scrollHeight}}},readParam:function(){var t=arguments[0];return{from:function(){for(var i=arguments[0].value.split("\n"),e=i.length,s="",r=0;r<e;r++){var n=i[r].split(" ");if(n[0]==t){s=parseFloat(n[1]);break}}return s}}}})},function(t,i){class e{constructor(){}setName(){this.name=arguments[0]}setType(){this.type=arguments[0]}setRegion(){this.region=arguments[0]}setWorld(){this.world=arguments[0]}paint(){this.world.setRows(this.region[1],this.region[3]).cols(this.region[0],this.region[2]).to(this.type)}}"compile"==butiran&&(t.exports=function(){return e})},function(t,i){var e=[[0,0],[1,0],[0,-1],[-1,0],[0,1]];class s{constructor(){this.x=0,this.y=0,2==arguments.length&&(this.x=arguments[0],this.y=arguments[1]),this.visitedCity=[],this.visitedIter=[]}setWorld(){var t=arguments[0];this.world=t}setType(){var t=arguments[0];this.type=t}paint(){var t=this.world.m;this.previousType=t[this.y][this.x],t[this.y][this.x]=this.type}moveRandom(){var t=this.x,i=this.y,s=Math.floor(5*Math.random()),r=t+e[s][0],n=i+e[s][1],h=this.world.m,a=h[n][r];if(0<a&&a<12){var o=this.previousType;this.previousType=h[n][r],h[n][r]=this.type,h[i][t]=o,this.x=r,this.y=n}}checkCity(){for(var t=arguments[0],i=arguments[1],e=0;e<t.length;e++){var s=t[e].region[0],r=t[e].region[1],n=t[e].region[2],h=t[e].region[3],a=this.x,o=this.y;if(s<=a&&a<=n&&(r<=o&&o<=h)){var c=e,u=this.visitedCity.length;if(u>0)this.visitedCity[u-1]!=c&&(this.visitedCity.push(c),this.visitedIter.push(i));else 0==u&&(this.visitedCity.push(c),this.visitedIter.push(i))}}}moveOnRoad(){for(var t=arguments[0],i=this.x,s=this.y,r=-1,n=0;n<t.length;n++){for(var h=0;h<t[n].regionXY.length;h++){var a=t[n].regionXY[h][0],o=t[n].regionXY[h][1];if(i==a&&s==o){r=n;break}}if(r>-1)break}var c=0,u=0;if(r>-1){var l=t[r].direction,d=t[r].probability,p=Math.random(),f=(h=-1,0);for(n=0;n<d.length;n++)if(p<(f+=d[n])){h=n;break}if(h>-1){var v=l[h];c=e[v][0],u=e[v][1]}}else{v=Math.floor(5*Math.random());c=e[v][0],u=e[v][1]}var g=i+c,m=s+u,w=this.world.m,b=w[m][g];if(0<b&&b<12){var x=this.previousType;this.previousType=w[m][g],w[m][g]=this.type,w[s][i]=x,this.x=g,this.y=m}}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){function s(){0==arguments.length?(this.r=new Vect3,this.s=[],this.s.push(new Vect3(1,0,0)),this.s.push(new Vect3(0,1,0)),this.s.push(new Vect3(0,0,1))):1==arguments.length?(this.r=arguments[0],this.s=[],this.s.push(new Vect3(1,0,0)),this.s.push(new Vect3(0,1,0)),this.s.push(new Vect3(0,0,1))):4==arguments.length&&(this.r=arguments[0],this.s=[],this.s.push(arguments[1]),this.s.push(arguments[2]),this.s.push(arguments[3]));var t=Vect3.div(this.s[0],2),i=Vect3.div(this.s[1],2),e=Vect3.div(this.s[2],2),s=t.neg(),r=i.neg(),n=e.neg();this.p=[],this.p.push(Vect3.add(this.r,s,r,n)),this.p.push(Vect3.add(this.r,t,r,n)),this.p.push(Vect3.add(this.r,t,i,n)),this.p.push(Vect3.add(this.r,s,i,n)),this.p.push(Vect3.add(this.r,s,r,e)),this.p.push(Vect3.add(this.r,t,r,e)),this.p.push(Vect3.add(this.r,t,i,e)),this.p.push(Vect3.add(this.r,s,i,e)),this.strval=function(){var t="(";return t+=this.r.strval()+", ",t+="[",t+=this.s[0].strval()+", ",t+=this.s[1].strval()+", ",t+=this.s[2].strval()+"",t+="], ",t+="[",t+=this.p[0].strval()+", ",t+=this.p[1].strval()+", ",t+=this.p[2].strval()+", ",t+=this.p[3].strval()+", ",t+=this.p[4].strval()+", ",t+=this.p[5].strval()+", ",t+=this.p[6].strval()+", ",t+=this.p[7].strval()+"",t+="]",t+=")"}}"compile"==butiran&&(Vect3=e(0)()),"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(UI=e(2));class s{constructor(){this.setParent(null),this.setId("canvaswh"),this.setBackground("#aaa"),this.setHeader("Output"),0==arguments.length?(this.width=200,this.height=200):(this.width=arguments[0].width,this.height=arguments[0].height)}setBackground(){this.background=arguments[0]}setHeader(){this.header=arguments[0]}createCanvasWH(){var t=UI.create("div").withId("div");UI.apply({float:"left",background:this.background,height:this.height+25+"px",paddingTop:"1px"}).to(t),this.div=t;var i=UI.create("canvas").withId(this.id);i.width=this.width,i.height=this.height,UI.apply({width:this.width+"px",height:this.height+"px",border:"1px solid #888",background:"#fff"}).to(i);var e=UI.create("div").withId("divh");UI.apply({border:"1px solid #888",height:"19px",paddingLeft:"6px"}).to(e),e.innerHTML=this.header,this.div.append(e),this.div.append(i)}appendTo(){this.createCanvasWH(),arguments[0].append(this.div)}setId(){this.id=arguments[0]}setParent(){this.parent=arguments[0];var t=arguments[0];null!=t&&this.appendTo(t)}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(UI=e(2));class s{constructor(){this.setParent(null),this.setId("textareawh"),this.setColor("#fff"),this.setBackground("#000"),this.setRows(7),0==arguments.length?this.header="ITER PAR0 PAR1 PAR2":this.header=arguments[0],this.width="0px",this.height="0px",this.calculateHeader(this.header)}setRows(){this.rows=arguments[0]}setColor(){this.color=arguments[0]}setBackground(){this.background=arguments[0]}createTextareaWH(){var t=UI.create("div").withId("div"),i=8*this.height;UI.apply({background:this.background,border:"0px solid #aaa",width:this.width+31+"px",height:this.height+2+i-10+"px",padding:"0px 0px 0px 0px",float:"left"}).to(t);var e=UI.create("div").withId("divh");UI.apply({color:this.color,paddintTop:"0px",background:this.backround,fontFamily:"Monospace",letterSpacing:"normal",wordSpacing:"0px",fontSize:"13.3333px",fontStretch:"normal",display:"inline-block"}).to(e);var s=UI.create("div").withId("spanh");UI.apply({border:"1px solid #aaa",paddingLeft:"2px",width:this.width+27+"px",height:"19px"}).to(s),s.innerHTML=this.header;var r=UI.create("textarea").withId(this.id);UI.apply({overflowY:"scroll",width:this.width-3+28+"px",height:this.height*this.rows+"px"}).to(r),e.append(s),t.append(e),t.append(r),this.div=t}appendTo(){this.createTextareaWH(),arguments[0].append(this.div)}calculateHeader(){var t=arguments[0],i=UI.create("div").withId("divh");UI.apply({color:"#fff",background:"#000",paddingLeft:"2px",fontFamily:"Monospace",letterSpacing:"normal",wordSpacing:"0px",fontSize:"13.3333px",fontStretch:"normal",display:"inline-block"}).to(i),i.innerHTML=t,document.body.append(i);var e=Math.ceil(i.getBoundingClientRect().width);this.width=e,i.style.width=this.width+"px";var s=Math.ceil(i.getBoundingClientRect().height);this.height=s,i.style.height=this.height+"px",i.remove()}setId(){this.id=arguments[0]}setParent(){this.parent=arguments[0];var t=arguments[0];null!=t&&this.appendTo(t)}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(UI=e(2));class s{constructor(){this.buttonDefaultWidth=60,this.buttonDefaultHeight=21,this.setLayout("vertical"),this.setId("buttons"),this.setParent(null),this.captions=[],this.states=[],this.listeners=[],this.width=0,this.height=0,this.row=0,this.col=0,0==arguments.length?this.setCaptions([["About"]]):this.setCaptions(arguments[0])}createButtons(){var t=0,i=0,e=this.captions.length;if("vertical"==this.layout?i=e/(t=1):(this.layout="horizontal")&&(t=e/(i=1)),this.row=i,this.col=t,this.width=this.col*this.buttonDefaultWidth,this.height=this.row*this.buttonDefaultHeight,void 0==this.div){this.div=UI.create("div").withId(this.id),UI.apply({background:"#eee",border:"0px solid black",width:this.width+"px",height:this.height+"px",float:"left",paddingTop:"1px"}).to(this.div);for(var s=0;s<e;s++){var r=document.createElement("button");r.id=this.captions[s][0],r.innerHTML=this.captions[s][0],r.style.width=this.buttonDefaultWidth+"px",r.style.height=this.buttonDefaultHeight+"px",0==this.states[s]&&(r.disabled=!0),this.div.append(r)}}}setListeners(){this.listeners=arguments[0]}addListeners(){for(var t=this.listeners.length,i=0;i<t;i++){UI.elementWithId(this.captions[i][0]).addEventListener("click",this.listeners[i])}}setLayout(){this.layout=arguments[0]}setId(){this.id=arguments[0]}setStates(){this.states=arguments[0]}setParent(){this.parent=arguments[0],void 0!=this.captions&&(this.createButtons(),this.appendToParent(this.parent),this.addListeners())}appendToParent(){void 0!=this.div&&void 0==this.div.parentElement&&UI.append(this.div).to(this.parent)}setCaptions(){this.captions=arguments[0]}state(){var t=arguments[0];return this.states[t]}disable(){var t=arguments[0];this.states[t]=0,UI.elementWithId(this.captions[t][0]).disabled=!0}enable(){var t=arguments[0];this.states[t]=1,UI.elementWithId(this.captions[t][0]).disabled=!1}toggleCaption(){var t=arguments[0];this.states[t]=1;var i=this.captions[t].length,e=UI.elementWithId(this.captions[t][0]);e.innerHTML==this.captions[t][0]?e.innerHTML=this.captions[t][0+i-1]:e.innerHTML=this.captions[t][0]}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i){var e=["#ccc","#fff","#ccf","#cfc","#fcc","#ffc","#fcf","#cff","#000","#000","#000","#000","#00f","#0f0","#f00","#ff0","#f0f","#0ff"];"compile"==butiran&&(t.exports={matrixPixelSize:10,matrixColor:e,paintMatrix:function(t){return function(){var t=arguments[0],i=t.m,s=t.rows,r=t.cols;return{onCanvas:function(){for(var t=arguments[0],n=document.getElementById(t).getContext("2d"),h=Display.matrixPixelSize,a=Display.matrixPixelSize,o=0;o<s;o++)for(var c=0;c<r;c++){var u=c*h,l=o*a,d=i[o][c],p=e[d];n.fillStyle=p,n.beginPath(),n.fillRect(u,l,u+h,l+a),n.fill(),n.strokeStyle="#fff",n.lineWidth=.2,n.beginPath(),n.rect(u,l,u+h,l+a),n.stroke()}}}}(t)}})},function(t,i,e){"compile"==butiran&&(City=e(3)());class s extends City{constructor(){super(),this.S=[],this.R=[],this.I=[],this.N=[]}calcSIR(){arguments[0];for(var t=arguments[1],i=t.length,e=0,s=0,r=0,n=0;n<i;n++){var h=this.region[0],a=this.region[1],o=this.region[2],c=this.region[3],u=t[n].x,l=t[n].y,d=h<=u&&u<=o&&(a<=l&&l<=c),p=t[n].timeSusceptible>-1&&-1==t[n].timeInfected&&-1==t[n].timeRecovered,f=t[n].timeSusceptible>-1&&t[n].timeInfected>-1&&-1==t[n].timeRecovered,v=t[n].timeSusceptible>-1&&t[n].timeInfected>-1&&t[n].timeRecovered>-1;d&&(p&&e++,f&&s++,v&&r++)}i=e+s+r;this.S.push(e),this.I.push(s),this.R.push(r),this.N.push(i)}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i){class e{constructor(){}setName(){this.name=arguments[0]}setType(){this.type=arguments[0]}setDirection(){this.direction=arguments[0],this.probability=arguments[1]}setRegionXY(){this.regionXY=arguments[0]}setWorld(){this.world=arguments[0]}paint(){for(var t=this.world.m,i=this.regionXY,e=i.length,s=0;s<e;s++)t[i[s][1]][i[s][0]]=this.type}}"compile"==butiran&&(t.exports=function(){return e})},function(t,i){class e{constructor(){var t=0;this.rows=1,this.cols=1,arguments.length<2?this.rows=arguments[0]:arguments.length<3?(this.rows=arguments[0],this.cols=arguments[1]):(this.rows=arguments[0],this.cols=arguments[1],t=arguments[2]),this.m=[];for(var i=0;i<this.rows;i++){for(var e=[],s=0;s<this.cols;s++){var r=t;e.push(r)}this.m.push(e)}}toString(){for(var t="",i=0;i<this.rows;i++){for(var e=0;e<this.cols;e++){t+=this.m[i][e],e<this.cols-1&&(t+="\t")}i<this.rows-1&&(t+="\n")}return t}beZero(){for(var t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)this.m[t][i]=0}beOne(){for(var t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)this.m[t][i]=1}setRow(){var t=arguments[0],i=this.m,e=this.cols;return{to:function(){for(var s=arguments[0],r=0;r<e;r++)i[t][r]=s}}}set(){var t=arguments[0],i=arguments[1],e=this.m;return{to:function(){var s=arguments[0];e[t][i]=s}}}get(){var t=arguments[0],i=arguments[1];return this.m[t][i]}setRows(){var t=arguments[0],i=arguments[1],e=this.m,s=this.cols;return{to:function(){for(var r=arguments[0],n=t;n<=i;n++)for(var h=0;h<s;h++)e[n][h]=r},cols:function(){var s=arguments[0],r=arguments[1];return{to:function(){for(var n=arguments[0],h=t;h<=i;h++)for(var a=s;a<=r;a++)e[h][a]=n}}}}}setCol(){var t=arguments[0],i=this.m,e=this.rows;return{to:function(){for(var s=arguments[0],r=0;r<e;r++)i[r][t]=s}}}setCols(){var t=arguments[0],i=arguments[1],e=this.m,s=this.rows;return{to:function(){for(var r=arguments[0],n=0;n<s;n++)for(var h=t;h<=i;h++)e[n][h]=r}}}drawLine(){var t=arguments[0],i=arguments[1],e=arguments[2],s=arguments[3],r=this.m;return{withColor:function(){var n=arguments[0],h=s-i+1;s<i&&(h=s-i-1);for(var a=h/(e-t+1),o=t;o<=e;o++){var c=Math.round(i+(o-t)*a);r[c][o]=n}}}}drawLineX(){var t=arguments[0],i=arguments[1],e=arguments[2],s=arguments[3],r=this.m;return{withColor:function(){var n=arguments[0],h=s-i+0;s<i&&(h=s-i-1);for(var a=h/(e-t+0),o=t;o<=e;o++){var c=Math.round(i+(o-t)*a);r[c][o]=n}}}}drawLineY(){var t=arguments[0],i=arguments[1],e=arguments[2],s=arguments[3],r=this.m;return{withColor:function(){var n=arguments[0],h=e-t+0;e<t&&(h=e-t-1);for(var a=h/(s-i+0),o=i;o<=s;o++){var c=Math.round(t+(o-i)*a);r[o][c]=n}}}}drawLine2(){var t=arguments[0],i=arguments[1],e=arguments[2],s=arguments[3],r=this.m;return{withColor:function(){var n=arguments[0],h=e-t,a=s-i,o=a/h;if(Math.abs(o)<=1)if(h>0)for(var c=t;c<=e;c++){var u=Math.round(i+(c-t)*o);r[u][c]=n}else{console.log(h,a,o);for(c=t;c>=e;c--){u=Math.round(i+(c-t)*o);r[u][c]=n}}else if(Math.abs(o)>1)if(o>0||h<0)for(u=i;u<=s;u++){c=Math.round(t+(u-i)/o);r[u][c]=n}else for(u=i;u>=s;u--){c=Math.round(t+(u-i)/o);r[u][c]=n}}}}coordLine2(){var t=arguments[0],i=arguments[1],e=arguments[2],s=arguments[3],r=(this.m,[]),n=e-t,h=s-i,a=h/n;if(Math.abs(a)<=1)if(n>0)for(var o=t;o<=e;o++){var c=[o,u=Math.round(i+(o-t)*a)];r.push(c)}else{console.log(n,h,a);for(o=t;o>=e;o--){c=[o,u=Math.round(i+(o-t)*a)];r.push(c)}}else if(Math.abs(a)>1)if(a>0||n<0)for(var u=i;u<=s;u++){c=[o=Math.round(t+(u-i)/a),u];r.push(c)}else for(u=i;u>=s;u--){c=[o=Math.round(t+(u-i)/a),u];r.push(c)}return r}}"compile"==butiran&&(t.exports=function(){return e})},function(t,i,e){"compile"==butiran&&(Agent=e(4)()),typeS=12,typeI=14,typeR=13;class s extends Agent{constructor(){2==arguments.length?super(arguments[0],arguments[1]):super();this.timeSusceptible=-1,this.timeInfected=-1,this.timeRecovered=-1,this.timeForHealing=0,this.infectedByAgent=-1,this.chainInfection=[]}setHealingTime(){this.timeForHealing=arguments[0]}setSusceptible(){var t=arguments[0];this.type=typeS,this.timeSusceptible=t}setInfected(){var t=arguments[0],i=arguments[1];this.timeSusceptible>-1&&-1==this.timeInfected&&(this.type=typeI,this.timeInfected=t,this.infectedByAgent=void 0==i?this.id:i)}setRecovered(){var t=arguments[0];this.timeInfected>-1&&(this.type=typeR,this.timeRecovered=t)}heal(){var t=arguments[0];this.timeInfected>-1&&t-this.timeInfected>=this.timeForHealing&&-1==this.timeRecovered&&this.setRecovered(t)}spreadInfection(){var t=arguments[0],i=arguments[1],e=i.length;if(this.timeInfected>-1&&-1==this.timeRecovered)for(var s=this.x,r=this.y,n=0;n<e;n++){var h=i[n].x,a=i[n].y;(1==Math.abs(h-s)&&0==Math.abs(a-r)||0==Math.abs(h-s)&&1==Math.abs(a-r)||1==Math.abs(h-s)&&1==Math.abs(a-r))&&i[n].setInfected(t,this.id)}}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)());class s{constructor(){this.k=1,this.l=1,this.gamma=1,this.o=new Vect3}setConstants(t,i){this.k=t,this.gamma=i}setUncompressedLength(t){this.l=t}setOrigin(t){this.o=t}force(){var t=new Vect3;if(1==arguments.length){if(arguments[0]instanceof Grain){var i=arguments[0].r,e=this.o,s=(v=Vect3.sub(i,e)).unit(),r=v.len(),n=this.l,h=arguments[0].v,a=new Vect3,o=Vect3.sub(h,a),c=this.k,u=this.gamma,l=r-n,d=o.len(),p=Vect3.mul(-c*l,s),f=Vect3.mul(-u*d,o);t=Vect3.add(p,f)}}else if(2==arguments.length&&arguments[0]instanceof Grain&&arguments[1]instanceof Grain){var v;i=arguments[0].r,e=arguments[1].r,s=(v=Vect3.sub(i,e)).unit(),r=v.len(),n=this.l,h=arguments[0].v,a=arguments[1].v,o=Vect3.sub(h,a),c=this.k,u=this.gamma,l=r-n,d=o.len(),p=Vect3.mul(-c*l,s),f=Vect3.mul(-u*d,o);t=Vect3.add(p,f)}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)(),Box=e(5)());class s{constructor(){this.k=1e4,this.gamma=10}setConstants(t,i){this.k=t,this.gamma=i}force(){var t=new Vect3;if(arguments[0]instanceof Grain&&arguments[1]instanceof Grain){var i=arguments[0].D,e=arguments[1].D,s=arguments[0].r,r=arguments[1].r,n=(k=Vect3.sub(s,r)).unit(),h=k.len(),a=arguments[0].v,o=arguments[1].v,c=(C=Vect3.sub(a,o)).unit(),u=this.k,l=this.gamma,d=.5*(i+e),p=Math.max(0,d-h),f=C.len()*Math.sign(p),v=Vect3.mul(u*p,n),g=Vect3.mul(-l*f,c);t=Vect3.add(v,g)}else if(arguments[0]instanceof Grain&&arguments[1]instanceof Box){i=arguments[0].D,s=arguments[0].r,a=arguments[0].v;var m=[],w=arguments[1],b=(r=w.r,w.s[0].unit());m.push(b);var x=w.s[1].unit();m.push(x);var y=w.s[2].unit();m.push(y);var V=b.neg();m.push(V);var I=x.neg();m.push(I);var M=y.neg();m.push(M);n=(k=Vect3.sub(s,r)).unit(),o=new Vect3,c=(C=Vect3.sub(a,o)).unit();for(var k,C,R=[],T=0;T<m.length;T++){var G=Vect3.add(w.s[0],w.s[1],w.s[2]),S=Vect3.dot(k,m[T]),U=Math.abs(.5*Vect3.dot(G,m[T]));R.push(S-U)}var H=R[0],P=-1;for(T=1;T<R.length;T++)R[T]<H&&(H=R[T],P=T);var z=[];for(T=0;T<R.length;T++)z.push(parseFloat(R[T].toFixed(3)));console.log(z);for(u=0,T=0;T<R.length;T++)R[T]>0&&(u=T+1);if(console.log("side: "+["I","R","U","F","L","D","B"][u]),P>-1){var D=m[P];G=Vect3.add(w.s[0],w.s[1],w.s[2]),Vect3.dot(G,D)}}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)());class s{constructor(){this.k=1e-7,this.B=new Vect3(1,0,0)}setField(t){this.B=t,delete this.k}setConstant(t){this.k=t,delete this.B}force(){var t=new Vect3;if(void 0!=this.B&&arguments[0]instanceof Grain){var i=arguments[0].q,e=arguments[0].v,s=this.B;t=Vect3.mul(i,Vect3.cross(e,s))}if(void 0!=this.k&&arguments[0]instanceof Grain&&arguments[1]instanceof Grain){var r=arguments[0].q,n=arguments[1].q,h=arguments[0].r,a=arguments[1].r,o=Vect3.sub(h,a),c=o.len(),u=arguments[0].v,l=arguments[1].v,d=this.k,p=Vect3.cross(u,Vect3.cross(l,o));t=Vect3.mul(d*r*n/(c*c),p)}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)());class s{constructor(){this.G=6.67408e-11,this.g=new Vect3(0,0,-9.80665)}setField(t){this.g=t,delete this.G}setConstant(t){this.G=t,delete this.g}force(){var t=new Vect3;if(void 0!=this.g&&arguments[0]instanceof Grain){var i=arguments[0].m,e=this.g;t=Vect3.mul(i,e)}if(void 0!=this.G&&arguments[0]instanceof Grain&&arguments[1]instanceof Grain){var s=arguments[0].m,r=arguments[1].m,n=arguments[0].r,h=arguments[1].r,a=Vect3.sub(n,h),o=a.unit(),c=a.len(),u=this.G;t=Vect3.mul(-u*s*r/(c*c),o)}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)());class s{constructor(){this.k=8987551787,this.E=new Vect3(1,0,0)}setField(t){this.E=t,delete this.k}setConstant(t){this.k=t,delete this.E}force(){var t=new Vect3;if(void 0!=this.E&&arguments[0]instanceof Grain){var i=arguments[0].q,e=this.E;t=Vect3.mul(i,e)}if(void 0!=this.k&&arguments[0]instanceof Grain&&arguments[1]instanceof Grain){var s=arguments[0].q,r=arguments[1].q,n=arguments[0].r,h=arguments[1].r,a=Vect3.sub(n,h),o=a.unit(),c=a.len(),u=this.k;t=Vect3.mul(u*s*r/(c*c),o)}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)(),Grain=e(1)());class s{constructor(){this.c0=0,this.c1=0,this.c2=0,this.vf=new Vect3}setConstants(t,i,e){this.c0=t,this.c1=i,this.c2=e}setField(t){this.vf=t}force(){var t=new Vect3;if(arguments[0]instanceof Grain){var i=this.c0,e=this.c1,s=this.c2,r=this.vf,n=arguments[0].v,h=Vect3.sub(n,r),a=h.unit(),o=h.len(),c=i+e*o+s*(o*o);t=Vect3.mul(c,a.neg())}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){"compile"==butiran&&(Vect3=e(0)());class s{constructor(){this.rho=1e3,this.g=new Vect3(0,0,-10)}setFluidDensity(t){this.rho=t}setGravity(t){this.g=t}force(){var t=new Vect3;if(arguments[0]instanceof Grain)if(1==arguments.length){var i=arguments[0].D,e=Math.PI/6*i*i*i,s=this.g.len(),r=this.rho,n=this.g.unit().neg();t=Vect3.mul(r*s*e,n)}else if(2==arguments.length){i=arguments[0].D;var h=arguments[1];e=0;if((u=arguments[0].r.y)<h-.5*i)e=Math.PI/6*i*i*i;else if(h-.5*i<=u&&u<=h+.5*i){var a=.25*i*i*((V=h-u)+.5*i),o=-1/3*(V*V*V+i*i*i/8);e=Math.PI*(a+o)}else e=0;s=this.g.len(),r=this.rho,n=this.g.unit().neg();t=Vect3.mul(r*s*e,n)}else if(4==arguments.length){var c,u,l=arguments[0].r.x,d=(i=arguments[0].D,this.g),p=l+.5*i,f=l-.5*i,v=arguments[1],g=arguments[2],m=(h=arguments[3],new Vect3(p,v,0)),w=new Vect3(f,g,0),b=Vect3.sub(m,w).unit(),x=d.unit(),y=Vect3.cross(Vect3.cross(x,b),b);r=this.rho;if((u=arguments[0].r.y)<h-.5*i)c=Math.PI/6*r*i*i*i*d.len(),y=Vect3.mul(-1,x);else if(h-.5*i<=u&&u<=h+.5*i){var V,I=.25*i*i*((V=h-u)+.5*i),M=-1/3*(V*V*V+i*i*i/8);c=Math.PI*r*(I+M)*d.len()}else c=0;t=Vect3.mul(c,y)}return t}}"compile"==butiran&&(t.exports=function(){return s})},function(t,i,e){butiran="compile";var s=e(0)(),r=e(1)(),n=e(5)(),h=e(20)(),a=e(19)(),o=e(18)(),c=e(17)(),u=e(16)(),l=e(15)(),d=e(14)(),p=e(4)(),f=e(13)(),v=e(12)(),g=e(11)(),m=e(3)(),w=e(10)(),b=e(9),x=e(2),y=e(8)(),V=e(7)(),I=e(6)();"undefined"!=typeof window&&(window.Grain=r,window.Vect3=s,window.Box=n,window.Buoyant=h,window.Drag=a,window.Electrostatic=o,window.Gravitational=c,window.Magnetic=u,window.Normal=l,window.Spring=d,window.Agent=p,window.AgentSIR=f,window.Matrix=v,window.Road=g,window.City=m,window.CitySIR=w,window.Display=b,window.UI=x,window.Buttons=y,window.TextareaWH=V,window.CanvasWH=I)}]);